<div class="container">
    <div class="row" *ngFor="let user of users ">
        <div class="col-md-12 text-center mt-4">
            <img [src]="user.userProfilPhoto" width="150px" class="img-thumbnail rounded-circle border border-dark" alt="profile-photo">
        </div>
        <div class="col-md-12 text-center mt-2">
            <p class="h4"><b>Profil Ayarları</b></p>
        </div>
        <form class="w-100" [formGroup]="myUserPermissions"  (ngSubmit)="ngOnSubmit()">
            <div class="col-md-8 mx-auto mt-2">
                <table class="table table-striped table-dark shadow">
                    <tbody >
                        <tr>
                            <td class="text-warning">Kullanıcı Adı</td>
                            <td>{{user.userName}}</td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                  
                                    <input type="checkbox" disabled class="custom-control-input" id="username" formControlName="username">
                                    <label class="custom-control-label" for="username">Görünmesini istemiyorum.</label>
                                  
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Hakkımda</td>
                            <td><p>{{user.userProfile.userAboutme}}</p></td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input"  id="userAboutMe" formControlName="userAboutMe">
                                    <label class="custom-control-label" for="userAboutMe">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Üyelik Tarihi</td>
                            <td>{{user.userRegisterDate | date}}</td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userRegisterDate" formControlName="userRegisterDate">
                                    <label class="custom-control-label" for="userRegisterDate">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Doğum Tarihi</td>
                            <td>{{user.userBirthdayDate | date}}</td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userBirthDate" formControlName="userBirthDate">
                                    <label class="custom-control-label" for="userBirthDate">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">İletişim Adresi</td>
                            <td>{{user.userEmail}}</td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userMailAdress" formControlName="userMailAdress">
                                    <label class="custom-control-label" for="userMailAdress">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Son Giriş Tarihi</td>
                            <td>2020/11/9 09:54</td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userLastSeen" formControlName="userLastSeen">
                                    <label class="custom-control-label" for="userLastSeen">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Tüm Yorumları</td>
                            <td><a href="#" class="text-white"><ins>Tıkla</ins></a></td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userShowAllComment" formControlName="userShowAllComment">
                                    <label class="custom-control-label" for="userShowAllComment">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Tüm Favorileri</td>
                            <td><a href="#" class="text-white"><ins>Tıkla</ins></a></td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userShowAllFav" formControlName="userShowAllFav">
                                    <label class="custom-control-label" for="userShowAllFav">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Github Adresi <img src="assets/images/github64.png" width="25px" alt="linkedin-profile"></td>
                            <td><a href="#" class="text-white"><ins>{{user.userProfile.userGithub}}</ins></a></td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userGithubAddress" formControlName="userGithubAddress">
                                    <label class="custom-control-label" for="userGithubAddress">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Linkedin Adresi<img src="assets/images/linkedin.png" width="25px" alt="linkedin-profile"> </td>
                            <td><a href="#" class="text-white"><ins>{{user.userProfile.userLinkedin}}</ins></a></td>
                            <td>
                                <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                    <input type="checkbox" class="custom-control-input" id="userLinkedinAddress" formControlName="userLinkedinAddress" >
                                    <label class="custom-control-label" for="userLinkedinAddress">Görünmesini istemiyorum.</label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-12 text-center">
                <button class="btn btn-outline-success">Değişiklikleri Kaydet</button>
            </div>
        </form>
        <div class="col-md-12">
            <div class="col-md-12 text-center mt-2">
                <p class="h4"><b>Hesap Ayarları</b></p>
            </div>
        </div>
        <form class="w-100" >
            <div class="col-md-8 mx-auto">
                <table class="table table-striped table-dark shadow">
                    <tbody>
                        <tr>
                            <td class="text-warning">Hesap Durumu</td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <div *ngIf="user.verification">
                                            <span class="text-success">Onaylandı</span>
                                        </div>
                                        <div *ngIf="!user.verification">
                                            <span class="text-info">Onaylanmadı.</span>
                                        </div>                                    
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-danger btn-sm" [disabled]="!sendVerifyButton" (click)="sendUserVerificationMail(user.userEmail)">Tekrar Yolla</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Kullanıcı Adı</td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="text" class="form-control bg-dark text-white border-0" #username  maxlength="20" value="{{user.userName}}" placeholder="İsim Soyisim" id="nameSurname">                                     
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-success" (click)="updateUserUsername(user.userEmail,username.value)" >Güncelle</button>
                                    </div>
                                </div>
                            </td>
                            
                        </tr>
                        <tr>
                            <td class="text-warning">Hesap Şifresi</td>
                            <td>
                               <div class="row">
                                   <div class="col-md-8">
                                    <input type="password" class="form-control bg-dark text-white border-0" #pass id="accountPassword">
                                   </div>
                                   <div class="col-md-4">
                                    <button class="btn btn-success" (click)="updateUserPass(user.userEmail,pass.value)">Güncelle</button>
                                   </div>
                               </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Doğum Tarihi</td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="date" class="form-control bg-dark text-white border-0" #birthdate max="2010-12-31" value="{{user.userBirthdayDate |  date:'yyyy-MM-dd'}}"  id="birthdate" required>
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-success"   (click)="updateUserBirthDate(user.userEmail,birthdate.value)">Güncelle</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Hesap Email Adresi</td>
                            <td>
                                <input type="email" disabled  class="form-control bg-dark text-white border-0"  value="{{user.userEmail}}" placeholder="Hesap Email Adresi" id="acountEmailAddress">
                            </td>  
                        </tr>
                        <tr>
                            <td class="text-warning">Github Adresi <img src="assets/images/github64.png" width="25px" alt="linkedin-profile"></td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="text" class="form-control bg-dark text-white border-0" #githubLink value="{{user.userProfile.userGithub}}" placeholder="{{user.userProfile.userGithub}}" id="userGithubAddress">
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-success" (click)="updateUserGithubAddres(user.userEmail,githubLink.value)">Güncelle</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="text-warning">Linkedin Adresi<img src="assets/images/linkedin.png" width="25px" alt="linkedin-profile"> </td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="text" class="form-control bg-dark text-white border-0"  #linkedinlink value="{{user.userProfile.userLinkedin}}" placeholder="{{user.userProfile.userLinkedin}}" id="userLinkedinAddress">
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-success"  (click)="updateUserLinkedinAddress(user.userEmail,linkedinlink.value)">Güncelle</button>
                                    </div>
                                </div>
                            </td>

                        </tr>
                        <tr>
                            <td class="text-warning">Profil Resmi </td>
                            <td>
                                <div class="row">
                                    <div class="col-md-8">
                                        <input type="file" max-size="1024" enctype="multipart/form-data" accept="image/*" (change)="onFileChanged($event)"  #fileVal required>
                                    </div>
                                    <div class="col-md-4">
                                     <button class="btn btn-success"  (click)="updateUserProfilPhoto(user.userId)">Güncelle</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
         <!--Comment Alerts-->
        <div class="row">
            <div class="col-6">
                <div *ngIf="success" class="alert alert-success alert-dismissible fade show fixed-bottom  m-4 border-dark" role="alert">
                    <strong>Harika!</strong> Güncelleme işlemi başarıyla gerçekleşti.
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="col-md-12" style="height: 150px;"></div>
    </div>
</div>

